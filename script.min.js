document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("constellation-canvas");if(t){const o=t.getContext("2d");let h=[],l=[],d=[];const c=25;let f,p;const g={x:void 0,y:void 0,radius:100};class u{constructor(t,e){this.startHub=t,this.endHub=e,this.path=this.findPath(t,e),this.pathIndex=0,this.progress=0,this.speed=.04*Math.random()+.02,this.color="rgba(255, 183, 77, 0.8)"}findPath(t,e){let s=[t],a=new Map,n=new Map(h.map(t=>[t,1/0]));n.set(t,0);let r=new Map(h.map(t=>[t,1/0]));for(r.set(t,this.heuristic(t,e));s.length>0;){let t=s.sort((t,e)=>r.get(t)-r.get(e))[0];if(t===e){let e=[t];for(;a.has(t);)t=a.get(t),e.unshift(t);return e}s=s.filter(e=>e!==t);for(let i of t.neighbors){let o=n.get(t)+1;o<n.get(i)&&(a.set(i,t),n.set(i,o),r.set(i,o+this.heuristic(i,e)),s.includes(i)||s.push(i))}}return[]}heuristic(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}update(){if(this.path&&0!==this.path.length){if(this.progress+=this.speed,this.progress>=1&&(this.progress=0,this.pathIndex++,this.pathIndex>=this.path.length-1)){const t=this.endHub;if("amplifier"===t.type&&Math.random()<.3){const e=l[Math.floor(Math.random()*l.length)];t!==e&&d.push(new u(t,e))}else if("dampener"===t.type&&Math.random()<.4)return void(this.progress=1.1);this.startHub=t,this.endHub=l[Math.floor(Math.random()*l.length)],this.path=this.findPath(this.startHub,this.endHub),this.pathIndex=0}}else this.progress=1.1}draw(){if(this.pathIndex>=this.path.length-1)return;const t=this.path[this.pathIndex],e=this.path[this.pathIndex+1],s=t.x+(e.x-t.x)*this.progress,a=t.y+(e.y-t.y)*this.progress;o.beginPath(),o.arc(s,a,1.5,0,2*Math.PI),o.fillStyle=this.color,o.fill()}}function e(){const e=window.devicePixelRatio||1;t.width=t.offsetWidth*e,t.height=t.offsetHeight*e,o.scale(e,e),f=Math.floor(t.offsetWidth/c),p=Math.floor(t.offsetHeight/c),h=[],l=[],d=[];for(let t=0;t<f;t++)for(let e=0;e<p;e++){const s=t*c+c/2,a=e*c+c/2;h.push({x:s,y:a,neighbors:[]})}for(let t=0;t<h.length;t++)for(let e=t+1;e<h.length;e++){Math.sqrt(Math.pow(h[t].x-h[e].x,2)+Math.pow(h[t].y-h[e].y,2))<1.5*c&&(h[t].neighbors.push(h[e]),h[e].neighbors.push(h[t]))}if(h.length>0){let t=h[Math.floor(Math.random()*h.length)];l=[t];let e=h.filter(e=>e!==t);for(let t=1;t<15&&e.length>0;t++){let t=null,s=-1;for(let a of e){let e=1/0;for(let t of l){const s=Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2));e=Math.min(e,s)}e>s&&(s=e,t=a)}t&&(l.push(t),e=e.filter(e=>e!==t))}}const s=[...l].sort(()=>.5-Math.random());s.slice(0,3).forEach(t=>t.type="amplifier"),s.slice(3,6).forEach(t=>t.type="dampener"),l.forEach(t=>{t.type||(t.type="default"),t.isHub=!0});for(let t=0;t<120;t++){const t=l[Math.floor(Math.random()*l.length)],e=l[Math.floor(Math.random()*l.length)];t!==e&&d.push(new u(t,e))}}window.addEventListener("resize",e),t.addEventListener("mousemove",e=>{const s=t.getBoundingClientRect();g.x=e.clientX-s.left,g.y=e.clientY-s.top}),t.addEventListener("mouseleave",()=>{g.x=void 0,g.y=void 0}),e(),function e(){if(o.fillStyle="rgba(17, 24, 39, 0.25)",o.fillRect(0,0,t.width,t.height),o.fillStyle="rgba(255, 183, 77, 0.1)",h.forEach(t=>{o.beginPath(),o.arc(t.x,t.y,1,0,2*Math.PI),o.fill()}),l.forEach(t=>{switch(t.type){case"amplifier":o.fillStyle="rgba(110, 231, 183, 0.7)";break;case"dampener":o.fillStyle="rgba(252, 165, 165, 0.7)";break;default:o.fillStyle="rgba(255, 183, 77, 0.6)"}o.beginPath(),o.arc(t.x,t.y,4,0,2*Math.PI),o.fill()}),d=d.filter(t=>t.progress<=1),d.forEach(t=>{t.update(),t.draw()}),void 0!==g.x&&Math.random()>.8&&d.length<250){const t=l.find(t=>Math.sqrt(Math.pow(t.x-g.x,2)+Math.pow(t.y-g.y,2))<g.radius);if(t){const e=l[Math.floor(Math.random()*l.length)];t!==e&&d.push(new u(t,e))}}requestAnimationFrame(e)}()}const s=document.getElementById("contact-form");s&&s.addEventListener("submit",function(t){t.preventDefault();const e=new FormData(s);fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()}).then(()=>{s.reset(),alert("Thank you for your message! It has been sent.")}).catch(t=>{alert("Sorry, there was an error sending your message. Please try again later.")})});const a=document.getElementById("hamburger-button"),n=document.getElementById("nav-links");a&&n&&(a.addEventListener("click",()=>{n.classList.toggle("active");const t=n.classList.contains("active");a.setAttribute("aria-expanded",t)}),n.addEventListener("click",t=>{"A"===t.target.tagName&&(n.classList.remove("active"),a.setAttribute("aria-expanded","false"))}));const r=document.querySelectorAll(".fade-in-section"),i=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("is-visible"),i.unobserve(t.target))})},{rootMargin:"0px",threshold:.1});r.forEach(t=>{i.observe(t)})});